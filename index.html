<!DOCTYPE html>

<html>

<head>
    <title>타이머</title>
    <meta charset="UTF-8">
    <style>
        .center{
            text-align:center;
        }
    </style>
</head>

<body>
<h1 align="center"><p style="background-color: orange;color:yellow"> 타이머 </p></h1>
<div class="center"><button id="add">타이머를 추가하세요.</button></div>
<p align="center" style="color:blue">&lt;타이머 목록&gt;</p>
<div id="team" align="center"></div>
    <script>
		console.log('안녕하세요!\n모두를 위한 타이머입니다.\nhttps://github.com/gmb9817/timer\nstar 눌러주세요!');
        document.getElementById("add").addEventListener('click',name);
        let arr=new Map();
		let time=new Map();
		let mp=new Map();
        function cnt(name){
			time.set(name,time.get(name)-1);
			document.getElementById(name).innerHTML=time.get(name);
		}
		function cl(clicked){
	    	if(clicked[clicked.length-1]==='+'){
				let id1=setInterval(cnt, 1000,clicked.slice(0,-1));
				clicked=clicked,slice(0,-1);
				mp.set(clicked,id1);
			}
			else{
				clicked=clicked,slice(0,-1);
				clearInterval(mp.get(clicked));
			}
        }
        function name(){
            var inputString = prompt('타이머 이름을 입력하세요.', '타이머');
            var ti=prompt('시간을 입력하세요.','90');
            if(arr.has(inputString)){
	            alert('이미 있는 타이머입니다.');
	        }
	        else if(inputString!=null && ti!=null){
                arr.set(inputString,ti);
				time.set(inputString,ti);
	            let js='[타이머 이름 : '+ inputString + '] || [' + '원래 시간 : ' + ti +']';
	            document.getElementById("team").innerHTML+=`<div id="${inputString}!">`+js+`<button id="${inputString}+" onclick="cl(this.id);")>시작</button> <button id="${inputString}-" onclick="cl(this.id);")>중지</button>` + '</div> 남은 시간 : '+`<div id="${inputString}">${ti}</div>`;
            }
        }

    </script>
</body>

</html>
